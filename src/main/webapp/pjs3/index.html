 <!DOCTYPE html>
 <html>
 <head>
  <title>Hello Web - Processing.js Test</title>
   <script src="processing.js"></script>
 </head>
 <body>
   <canvas id='canvas1'></canvas>
   <script>
    function sketchProc(processing) {
      var p = processing;
    
      var ball_x, ball_y, ball_dir = 1, ball_size = 5;  // Radius

      var dy = 0;  // Direction

      // Global variables for the paddle
      var paddle_width = 5, paddle_height = 20, dist_wall = 15;
      
      var game = {};
      game.size = {width:800, height:600};

      p.setup = function ()
      {
        p.size(game.size.width, game.size.height);
        p.frameRate(24);

        p.rectMode(p.CENTER_RADIUS);

        p.ellipseMode(p.CENTER_RADIUS);

        p.noStroke();

        p.smooth();
        
        //p.noLoop();

        ball_y = p.height/2;

        ball_x = 1;
      }
      
      var create_box = function (params) {
        var box = {};
        
        box.width = 50;
        box.height = 50;
        box.x = game.size.width/2;
        box.y = game.size.height - 20 - box.height;
        
        box.draw = function () {
          p.rect(this.x, this.y, this.width, this.height);
        };
        
        return box;
      };
      
      var box = create_box();
      var balloons = [];
      
      var create_balloon = function() {
        var balloon = {};
        balloon.width = 15;
        balloon.height = 50;
        balloon.y = 20 + balloon.height;
        balloon.x = 0|(p.random(balloon.width, game.size.width - balloon.width));
        
        balloon.draw = function () {
          p.ellipse(this.x, this.y, this.width, this.height);
          p.line(this.x, this.y, this.x, this.y + 2 * this.height);
          p.stroke(255);
        }
        
        balloons.push(balloon);
        return balloon;
      }

      p.draw = function ()
      {
        var i;
        
        p.background(51);        
        box.draw();

        if(p.frameCount % 64 === 0 && balloons.length < 8) {
          create_balloon();
        }
        for(i = 0; i< balloons.length; i++) {
          balloons[i].draw();
        }
      };
      
      var shoot = function () {
        var i;
        for(i = 0; i< balloons.length; i++) {
          if(Math.abs(box.x - balloons[i].x) < balloons[i].width) {
            balloons.splice(i, 1);i--;
          }
        }
      }
      
      p.keyPressed = function () {
        console.log(p.keyCode + ":" + p.LEFT);
        if(p.keyCode === p.LEFT) {
          box.x -= 16;
          return;
        }
        if(p.keyCode === p.RIGHT) {
          box.x += 16;
          return;
        }
        
        shoot();
      }
      
      p.mousePressed = function () {
        shoot();
      }
      
    }
 var canvas = document.getElementById("canvas1");
 // attaching the sketchProc function to the canvas
 var processingInstance = new Processing(canvas, sketchProc);
 
  var combinations = function (length, chars) {
    var i, result = [[]];
    
    for (i = 0; i < length; i++) {
    
      result = result.map(function(a){
        return chars.map(function(b){
          return a.concat([b]);
        });
      }).reduce(function(a,b){
        return a.concat(b);
      });
    }
    
    return result;
  }
 
   </script>
 </body>
</html>